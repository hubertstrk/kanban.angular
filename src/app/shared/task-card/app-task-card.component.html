<div class="flex flex-col bg-white dark:bg-zinc-600 p-3 rounded-md mb-2 shadow-sm relative group gap-1"
     (dblclick)="onEditTask()">
  <div class="flex justify-between items-start">
    <div class="flex flex-col gap-1">
      <div [ngClass]="getTitleClass()">{{ task.title }}</div>
      <app-tag *ngIf="task.priority && task.priority !== 'medium'" [text]="task.priority" [color]="getPriorityColor(task.priority)"></app-tag>
    </div>
    <app-button
      *ngIf="task.status === 'done'"
      (clicked)="onDeleteTask()"
      [size]="'sm'"
      [icon]="icons['fluent--delete-24-regular']">
    </app-button>
  </div>

  <div class="text-sm text-zinc-600 dark:text-zinc-300 mt-1" (mousedown)="onTextMouseDown($event)"
  >{{ getTaskContent(task.content) }}
  </div>
</div>

<app-modal [isOpen]="isModalOpen" (closed)="closeModal()">
  <div modalTitle>Edit Task</div>

  <div class="flex flex-col gap-4">
    <div class="flex flex-col gap-2">
      <label for="taskTitle" class="text-sm font-medium">Title</label>
      <input
        id="taskTitle"
        type="text"
        [(ngModel)]="editedTask.title"
        class="border border-gray-300 dark:border-gray-600 rounded-md p-2 dark:bg-zinc-700"
      >
    </div>

    <div class="flex flex-col gap-2">
      <label for="taskContent" class="text-sm font-medium">Description</label>
      <textarea
        id="taskContent"
        [(ngModel)]="editedTask.content"
        rows="6"
        class="border border-gray-300 dark:border-gray-600 rounded-md p-2 dark:bg-zinc-700"
        (mousedown)="onTextMouseDown($event)"
      ></textarea>
    </div>

    <div class="flex flex-col gap-2">
      <label for="taskPriority" class="text-sm font-medium">Priority</label>
      <app-dropdown
        id="taskPriority"
        [options]="priorityOptions"
        [selectedValue]="editedTask.priority ?? TaskPriority.Medium"
        (selectionChange)="onPriorityChange($event)"
      ></app-dropdown>
    </div>
  </div>

  <div modalFooter class="flex gap-2">
    <app-button (clicked)="closeModal()" [rounded]="false">Cancel</app-button>
    <app-button (clicked)="saveTask()" [variant]="'primary'" [rounded]="false">Save</app-button>
  </div>
</app-modal>
